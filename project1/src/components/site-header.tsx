import React, { useState } from 'react';
import { Link } from 'react-router-dom';
import { Menu, Sun, Moon } from 'lucide-react';
import { Button } from '@/components/ui/button';
import {
  NavigationMenu,
  NavigationMenuContent,
  NavigationMenuItem,
  NavigationMenuLink,
  NavigationMenuList,
  NavigationMenuTrigger,
  navigationMenuTriggerStyle,
} from '@/components/ui/navigation-menu';
import { cn } from '@/lib/utils';
import { SignInButton } from '@/components/sign-in-button';
import { SignUpButton } from '@/components/sign-up-button';
import { UserButton } from '@/components/user-button';
import { useAuth } from '@/contexts/auth-context';

const MainNav = () => {
  return (
    <NavigationMenu>
      <NavigationMenuList>
        <NavigationMenuItem>
          <Link to="/" className={navigationMenuTriggerStyle()}>
            Home
          </Link>
        </NavigationMenuItem>
        <NavigationMenuItem>
          <NavigationMenuTrigger>About</NavigationMenuTrigger>
          <NavigationMenuContent>
            <ul className="grid w-[400px] gap-3 p-4 md:w-[500px] md:grid-cols-2 lg:w-[600px]">
              <ListItem to="/about" title="About Sanatani">
                Learn about our mission and vision
              </ListItem>
              <ListItem to="/about-guruji" title="About Guruji">
                Meet our spiritual guide and teacher
              </ListItem>
              <ListItem to="/why-us" title="Why Choose Us">
                Discover what makes us unique
              </ListItem>
            </ul>
          </NavigationMenuContent>
        </NavigationMenuItem>
        <NavigationMenuItem>
          <NavigationMenuTrigger>Explore</NavigationMenuTrigger>
          <NavigationMenuContent>
            <ul className="grid w-[400px] gap-3 p-4 md:w-[500px] md:grid-cols-2 lg:w-[600px]">
              <ListItem to="/books" title="Books">
                Explore spiritual books and sacred texts
              </ListItem>
              <ListItem to="/teachings" title="Teachings">
                Video and article teachings from spiritual masters
              </ListItem>
              <ListItem to="/audiobooks" title="Audiobooks">
                Listen to spiritual books and teachings
              </ListItem>
              <ListItem to="/stories" title="Stories">
                Spiritual stories and parables
              </ListItem>
              <ListItem to="/bliss-talk" title="Bliss Talk">
                Chat with our spiritual AI guide
              </ListItem>
            </ul>
          </NavigationMenuContent>
        </NavigationMenuItem>
        <NavigationMenuItem>
          <NavigationMenuTrigger>Resources</NavigationMenuTrigger>
          <NavigationMenuContent>
            <ul className="grid w-[400px] gap-3 p-4 md:w-[500px] md:grid-cols-2 lg:w-[600px]">
              <ListItem to="/religious-places" title="Religious Places">
                Explore holy sites and temples
              </ListItem>
              <ListItem to="/offerings" title="Offerings">
                Learn about offerings and worship
              </ListItem>
              <ListItem to="/subscription" title="Subscription">
                Subscription plans and benefits
              </ListItem>
            </ul>
          </NavigationMenuContent>
        </NavigationMenuItem>
        <NavigationMenuItem>
          <Link to="/donate" className={navigationMenuTriggerStyle()}>
            Donate
          </Link>
        </NavigationMenuItem>
      </NavigationMenuList>
    </NavigationMenu>
  );
};

const ListItem = React.forwardRef<
  React.ElementRef<"a">,
  React.ComponentPropsWithoutRef<"a"> & { to: string; title: string }
>(({ className, title, children, to, ...props }, ref) => {
  return (
    <li>
      <NavigationMenuLink asChild>
        <Link
          ref={ref}
          to={to}
          className={cn(
            "block select-none space-y-1 rounded-md p-3 leading-none no-underline outline-none transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground",
            className
          )}
          {...props}
        >
          <div className="text-sm font-medium leading-none">{title}</div>
          <p className="line-clamp-2 text-sm leading-snug text-muted-foreground">
            {children}
          </p>
        </Link>
      </NavigationMenuLink>
    </li>
  );
});
ListItem.displayName = "ListItem";

export function SiteHeader() {
  const [theme, setTheme] = React.useState<'light' | 'dark'>('light');
  const [mobileMenuOpen, setMobileMenuOpen] = React.useState(false);
  const { user, isLoading } = useAuth();

  const toggleTheme = () => {
    const newTheme = theme === 'light' ? 'dark' : 'light';
    setTheme(newTheme);
    document.documentElement.classList.toggle('dark', newTheme === 'dark');
  };

  const toggleMobileMenu = () => {
    setMobileMenuOpen(!mobileMenuOpen);
  };

  return (
    <header className="sticky top-0 z-40 w-full border-b bg-background">
      <div className="container flex h-16 items-center space-x-4 sm:justify-between sm:space-x-0">
        <div className="flex items-center gap-2">
          <Link to="/" className="flex items-center">
            <svg 
              className="h-8 w-auto dark:invert" 
              viewBox="0 0 3136.66 741.2"
              aria-label="Sanatani"
            >
              <path d="M665.42,235.75c-2.1,0-4.3.5-6.2,1.5-1.1.6-2.3,1.2-3.5,1.6-4.2.9-5.7,4-6,7.7-.5,5.8,1.7,11,5.4,15.4.8.9,2,1.6,3.2,1.9,2.2.4,4.4.7,6.6.7,8.1.4,14.9-5.8,15.4-13.8h0c.4-8-6.1-14.8-15-14.9l.1-.1ZM216.62,661.05c7,0,13-4.8,14.5-11.6,1.3-6.9-2.5-13.7-9-16.2-2.5-1-5.1-1.8-7.7-2.5-3.2-.8-6.2.3-7.5,2.9-1.6,3.4-3.4,7-4.1,10.6-1.8,9.5,5.7,17.1,13.8,16.7v.1ZM262.92,80.65c7.9.3,14.5-6.7,14.6-14.1,0-8-6.3-14.5-14.3-14.6-8,0-14.5,6.3-14.6,14.3h0c-.1,7.5,6.5,14.6,14.2,14.4h.1ZM50.92,462.35c0,7.9,6.4,14.4,14.4,14.4s14.4-6.4,14.4-14.4-6.4-14.4-14.4-14.4h-.1c-7.9,0-14.3,6.4-14.3,14.3h0v.1ZM629.62,528.55c-.3,6.6,5,14,14.3,14.2,7.9,0,14.2-6.5,14.2-14.4s-6.5-14.2-14.4-14.2c-8.7.2-14.5,7.1-14.2,14.3h0l.1.1ZM69.82,224.55c-.1,7.7,6.1,14.1,13.8,14.2h.5c7.9,0,14.3-6.6,14.2-14.5s-6.6-14.3-14.5-14.2c-7.8,0-14.1,6.4-14,14.2v.3ZM455.92,688.95c1.8-.9,3.4-1.7,5-2.5,2-1,3.7-2.5,5-4.3,3.4-4.5,3.8-10.5.9-15.4-2.5-5-7.9-8-13.5-7.5-6.7.3-12.1,5.4-13,12-1.1,7.3,2,12.8,9,15.5,2,.8,4.2,1.3,6.6,2.1v.1ZM515.82,76.65c0-7.9-5.5-14.2-14.4-14-9.7.2-14.2,7.5-14.1,14.4,0,7.7,6.1,14,13.8,14h.6c8.2,0,14.1-6.1,14-14.4h.1ZM638.72,581.05v-.3h-.3c0,.1.3.3.3.3Z"></path>
              <path d="M423.12,360.75c2.4-1.8,4.2-3.3,6.2-4.7,27.8-19.5,59.2-33.5,92.3-41,12.6-2.8,25.5-4.6,38.4-5.4,11.3-.8,22.7-.8,34,0,21.7,1.7,43.1,6,63.8,12.7,30.7,9.9,58.2,25.4,83.4,45.4.9.8,1.7,1.6,2.5,2.5-.4,2.1-1.9,2.9-3.1,3.9-5.7,4.4-11.4,8.8-17.3,12.9-28.6,19.8-61.1,33.4-95.2,40-15.7,3.2-31.6,5-47.6,5.5-39.7,1-79-7.8-114.5-25.4-13.8-6.8-27-14.6-39.6-23.5-.9-.6-1.8-1.3-2.8-1.9-.4-.1-.9-.2-1.4-.3-1.6,1.2-3.6,2.6-5.4,4.1-2.9,2.5-4,7.9-2.5,11.5.6,1.4,1.7,2.4,3.2,2.7,1.7.5,3.4.9,5.1,1.1,23.6,4.1,46.6,11.4,68.4,21.5,30.5,14.5,56.6,34.6,79,59.8,26.4,29.6,45.4,63.2,56.2,101.5,3.8,13.5,6.5,27.4,8.2,41.3.2,2.1.7,4.1.9,6.2s-.8,3-2.8,2.8c-7.1-.9-14.3-1.8-21.4-2.9-14.7-2.2-29.1-6-43-11.4-57.3-22-103-58.1-134.6-111.1-14.1-23.6-23.6-49.3-29.5-76.1-1.1-5.1-2-10.3-2.8-15.5-.1-1.7-1.4-3-3-3.2-1.4-.3-2.8-.5-4.3-.7-2.6-.5-5.2.4-7,2.3-1.2,1.3-2.4,2.6-3.5,4-.6.8-1.1,1.7-1.5,2.6.7,1.1,1.4,2.2,2.1,3.2,22.1,30.2,37.3,64.8,44.6,101.4,4.2,20.5,5.6,41.5,4.4,62.5-2.2,36.5-11.7,72.2-28.1,104.8-7.7,15.3-17.1,29.7-27.8,43-1,1.3-2.1,2.4-3.3,3.5-1.1,1.1-2.8,1.1-4,.2-.5-.4-1-.8-1.5-1.2-4.8-5.3-10-10.4-13.4-16.8-.8-1.5-1.8-3-2.8-4.5-17.9-27.6-30.4-58.2-37.1-90.4-3.8-19.1-5.6-38.6-5.4-58.1.3-31.3,7.1-61.1,18.8-90,5.8-14.4,13-28.2,21.3-41.3,2.5-3.9,5.4-7.6,8-11.4,3.6-5.2,3.5-5.9-.8-10.7-2.6-3-5.6-4-9.4-3-.8.2-1.6.3-2.4.4-2.7.6-3.1.9-3.5,3.8-2.6,19.3-8,37.8-15.1,55.9-.9,2.2-1.8,4.5-2.7,6.7-3.6,8.7-7.8,17.2-12.5,25.3-19.7,34.7-46.4,63-79.3,85.3-28.3,19.2-60,32.6-93.4,39.7-5.6,1.2-11.3,2.1-17,2.9-4.3.6-8.7.7-13.1.2-1.2-1-.8-2-.7-2.9,1.2-12.2,3.3-24.3,6.2-36.3,2.4-10.8,5.8-21.3,10.2-31.4,1.3-3.1,2.7-6.2,3.9-9.3,8.7-22.4,21.3-42.5,36.5-61.1,38.2-46.9,87-76.4,146-89.2,4.7-1,9.4-1.8,14.1-2.6,2-.3,3.2-1.2,3.6-3.2,0-.5.2-.9.3-1.4.9-6.9.8-8-5.6-13-1.2-1.1-3.1-1.2-4.5-.3-1.5.9-3,1.8-4.5,2.8-19.6,13.3-40.7,24.3-62.9,32.6-18.6,6.9-38,11.5-57.7,13.7-15.1,1.6-30.4,1.8-45.5.5-37-3.1-71.7-14-104.8-30.5-14.2-7.1-27.4-16-39.3-26.4-5.1-4.4-5.1-4.8,0-8.9,27.3-21.4,57.4-37.6,90.9-47.2,14.4-4.1,29.2-6.9,44.2-8.4,16.4-1.6,32.9-1.8,49.4-.6,33.6,2.5,66.3,12,96,27.9,9.9,5.2,19.5,11.1,28.7,17.4,1.7,1.2,3.3,2.5,4.9,3.8,1,.9,2.5,1,3.5.3,1.1-.7,2.1-1.4,3.2-2.1,3.6-2.4,4.6-5.9,4.6-10,.1-2.5-1.5-4.8-3.9-5.5-1.7-.6-3.4-1-5.1-1.3-24.3-4.5-47.7-11.7-70.1-22.5-38.3-18.4-69.4-45.4-94.2-79.8-18.9-26.2-32.9-54.7-41.1-86-3.2-12.5-5.5-25.3-6.9-38.2,0-.8-.1-1.6-.1-2.4,0-2.9,1.2-4.1,4.2-3.9,4.6.4,9.2,1,13.8,1.7,21.1,3.3,41.6,8.7,61.2,17.2,54.1,23.5,96.5,60.3,125.5,111.9,12.7,22.6,21.1,46.8,26.5,72.2.8,3.6,1.4,7.2,2.1,10.8.2,1.2.5,2.5.9,3.7.4,1.4,1.6,2.5,3.1,2.7,5.5,1.2,10.1-.6,13.8-4.8,2-2.3,2-3.8.1-6.4-10.6-14.4-19.8-29.9-27.2-46.2-9.1-19.9-15.4-41-18.7-62.7-2.3-14.5-3.5-29.2-3.6-43.9,0-38.2,8.7-75.9,25.6-110.2,8.4-17.1,18.5-33.3,30-48.5.9-1.3,1.9-2.5,3-3.7,2.3-2.4,3.6-2.3,6,.1.7.7,1.3,1.4,1.9,2.1,25,31.6,42.2,66.9,50.8,106.4,4.1,18.9,6.2,38.3,6.2,57.6,0,39-9.2,77.5-27,112.2-5.8,11.4-12.4,22.4-19.6,32.9-1.4,2.1-3,4.1-4.6,6.2,1.1,2.6,2.6,4.9,4.6,6.8,1,1,2.3,1.8,3.6,2.2,5.6,2,9.5,0,11-5.7,1.4-5.2,2.4-10.6,3.7-15.9,5.8-24.4,14.7-48,26.6-70.1,22.3-41,54.2-72.5,95-95.1,23.8-13.1,49.3-23.1,75.7-29.5,6.8-1.7,13.8-2.4,20.8-3.6l8-1.4c3.3-.6,3.9.1,4.2,3.2.6,5.7-.7,11.1-1.9,16.6-3.2,15-6.3,30-11.5,44.5-10.1,28.9-25.2,55.8-44.7,79.4-7.1,8.8-15,17.1-23.5,24.6-1.7,1.5-3.4,3-5,4.5-23.2,21.5-50.1,36.8-79.6,48-16.3,6.1-33.2,10.5-50.5,13.3-.8.1-1.6.2-2.4.4-1,.2-1.7,1-1.9,2-.3,2.2-.6,4.4-.6,6.7-.1,2.6,1.1,5.1,3.2,6.6,1.8,1.3,3.6,2.4,5.7,3.8l.8.2ZM436.92,370.65c.6,2.3,2.5,3.1,4.1,4.2,40.4,27.3,85.1,41.4,133.9,42.3,15,.2,30.1-1.2,44.8-4,33.3-6,65-18.9,93.1-37.7,1.4-.8,2.7-1.8,3.9-2.8.6-.6,1-1.3,1.4-2.1-.9-2.3-2.7-3.1-4.3-4.1-36.4-24.6-78.7-38.9-122.5-41.5-21.2-1.4-42.6,0-63.4,4.4-31.5,6.6-60.4,19.6-87,37.6-.9.6-1.8,1.3-2.7,2-.5.5-.9,1.1-1.3,1.8v-.1ZM418.22,575.75c-.3-16.6-2.1-33.1-5.4-49.3-6.6-31.5-19.5-60.4-37.5-87-.6-.9-1.3-1.8-2.1-2.6s-2.1-.9-2.9-.1h0c-.9.9-1.7,1.9-2.4,3-2.8,4.3-5.6,8.5-8.2,13-20.4,34.2-32.1,72.9-33.9,112.7-.9,19.5.6,39.1,4.5,58.2,6.4,32.1,19.3,62.5,37.8,89.4.5.8,1.1,1.6,1.7,2.3,1.5,1.8,2.9,1.9,4.4.1.8-1,1.6-2,2.2-3.1,7.1-10.6,13.4-21.8,18.8-33.4,15.2-32.5,22.7-66.7,23.2-103.2h-.2ZM24.62,370.55c.4.6.9,1.1,1.4,1.6,1,.8,2,1.6,3.1,2.3,36.8,25.1,79.7,39.7,124.2,42.1,19.2,1.2,38.4,0,57.3-3.4,22-4.1,43.3-11.3,63.3-21.6,10.5-5.4,20.7-11.5,30.5-18.1,1.1-.8,2.6-1.4,2.8-3.4-1-.8-2-1.8-3.2-2.5-3.2-2.1-6.4-4.2-9.7-6.2-34.1-20.8-70.7-33.9-110.8-36.6-15.5-1-31-.4-46.4,1.7-15.4,2.1-30.5,5.6-45.3,10.3-22.4,7.1-43.5,16.9-62.6,30.5-1.4,1-2.8,2.1-4.5,3.3h-.1ZM617.42,126.15c-2.6-1-4.7-.5-6.7-.1-11.6,2.3-23,5.4-34.2,9.3-64.1,21.9-125,74.6-149.9,150.5-3.6,11.1-6.6,22.4-8.8,33.8-1,5.3.1,6.4,5.5,5.3,3.9-.8,7.8-1.7,11.7-2.6,35.5-8.6,67.6-24,96.1-46.9,37.6-30.3,73.5-81.7,85-141.4.5-2.5.9-5,1.3-7.8v-.1ZM126.52,125.45c-.1,1-.2,2-.2,2.9.4,2.7.9,5.4,1.5,8,13.2,60,44.2,108.8,93.5,145.5,29.7,22.1,63,36.2,99.5,42.9,5,.9,6,0,5.1-4.7-6.5-35.3-20.8-68.8-41.7-98-36.6-51.5-95.8-85.8-153-96.2-1.3-.2-2.8-.3-4.8-.4h.1ZM372.42,305.65c.9-.8,1.8-1.7,2.5-2.7,1.9-2.8,3.7-5.6,5.5-8.4,21.1-33.4,33.7-69.8,36.8-109.3,1.6-20.1.6-40.3-2.8-60.2-5.9-34.5-19.1-67.3-38.7-96.2-3.4-5-4.4-5.5-8.2.1-12.3,18.2-22,38-28.7,58.8-7.2,21.2-11.6,43.3-13.1,65.6-1.3,20.4.2,41,4.6,61,7,32,20.3,61.1,38.4,88.3.7,1.5,2.1,2.6,3.8,3h-.1ZM616.92,615.35c.7-1.8.3-3.3,0-4.9-2.9-13.3-6.6-26.3-11.2-39.1-10.5-28.7-25.3-54.8-45.7-77.6-20.5-23.1-45-41-72.4-55.2-20.4-10.5-42.2-17.8-64.7-21.8-1.7-.3-3.4-.7-5.1,0-1,2.2-.3,4.3.1,6.2,5.4,28.6,16.1,56,31.4,80.9,20.1,32.9,46.2,59.8,79.4,79.7,26,15.6,54.2,25.7,83.8,32,1.4.4,2.8.7,4.5-.2h-.1ZM326.12,416.45c-1.2-.1-2.5-.2-3.8-.1-1.7.2-3.5.6-5.2,1-22.2,4.5-43.5,11.6-63.6,22.2-29.1,15.3-54.5,35.2-75.3,60.7-22.8,27.9-38.2,59.6-47.8,94.2-1.5,5.2-2.5,10.6-3.6,15.9-.4,1.8-1,3.7.2,5.8,1.4,0,2.8-.1,4.2-.3,7.5-1.7,15.1-3.1,22.4-5.3,30.3-9.5,58.4-23.3,83.8-42.6,21.8-16.4,40.3-36.7,54.7-59.9,16.9-27.2,27.5-56.9,33.8-88.1.1-1.1.2-2.3.2-3.4v-.1ZM398.32,371.25h-.2c.1-1.1.1-2.2.3-3.3.8-4.5-.7-8.1-3.8-11.3-2-2.1-3.9-4.2-5.8-6.4-3.4-4.1-8.7-6.3-14-5.9-1.7.2-3.5.1-5.2,0-4-.7-8.1.5-11.1,3.2-2.3,2-4.5,4.1-6.9,6-4.8,3.6-6.6,8.4-6.3,14.2.2,3.5.2,7,.2,10.5,0,2.6.9,5.1,2.7,7,1.2,1.3,2.5,2.4,3.9,3.6,1.6,1.3,3.2,2.7,4.6,4.2,3.4,4.1,7.8,5.3,12.8,4.9,3.3-.3,6.7-.5,10-.7,2.4,0,4.7-1,6.5-2.6,1.4-1.3,2.6-2.8,3.9-4.2,1.7-1.9,3.3-3.9,5.2-5.6,2.2-1.9,3.4-4.8,3.2-7.7v-5.8h0v-.1Z"></path>
              <path d="M924.18,569.06v-78.74c12.35,11.85,29.84,21.88,52.5,30.11,22.64,8.24,46.83,13.89,72.57,16.98,25.73,3.09,51.98,3.61,78.74,1.54,26.75-2.05,50.95-6.82,72.57-14.28,21.62-7.45,39.37-18.65,53.27-33.58,13.9-14.92,20.84-32.68,20.84-53.27,0-16.98-6.44-30.49-19.3-40.53-12.87-10.04-29.6-17.11-50.18-21.23-20.59-4.11-43.36-7.33-68.32-9.65-24.97-2.32-49.93-5.66-74.88-10.04-24.97-4.37-47.74-10.42-68.32-18.14-20.59-7.72-37.32-20.19-50.18-37.44-12.87-17.24-19.3-38.99-19.3-65.23,0-27.79,7.45-52.62,22.39-74.5,14.92-21.87,34.47-38.85,58.67-50.95,24.19-12.09,51.46-21.1,81.83-27.02,30.36-5.91,60.6-8.11,90.71-6.56s59.06,6.31,86.85,14.28c27.79,7.99,50.69,18.66,68.71,32.04v79.52c-14.93-14.4-36.67-26.12-65.23-35.13-28.56-9-58.94-13.9-91.1-14.67-32.17-.77-62.92,1.68-92.25,7.33-29.34,5.67-53.53,16.73-72.57,33.2-19.05,16.48-28.56,36.8-28.56,60.99,0,15.44,5.02,28.06,15.05,37.83,10.04,9.78,23.28,16.6,39.76,20.46,16.47,3.86,35.13,7.47,55.97,10.81,20.84,3.35,42.19,5.79,64.08,7.33,21.87,1.54,43.35,5.02,64.46,10.42,21.1,5.4,39.88,12.1,56.36,20.07,16.47,7.99,29.59,20.2,39.37,36.67,9.77,16.48,14.67,36.28,14.67,59.44,0,27.79-7.47,52.5-22.39,74.11-14.93,21.62-34.35,38.6-58.29,50.95-23.93,12.35-51.08,21.49-81.45,27.41-30.37,5.92-60.6,8.11-90.71,6.56-30.11-1.54-59.06-6.3-86.85-14.28-27.79-7.97-50.95-18.91-69.48-32.81Z"></path>
              <path d="M1718.56,261.03h-293.36v50.18c43.23-13.38,82.61-15.44,118.12-6.18,32.93,7.72,59.95,25.09,81.06,52.11,21.1,27.02,31.65,60.87,31.65,101.52v157.49l-76.43-15.44v-17.76c-20.07,12.87-42.72,21.36-67.94,25.48-25.22,4.12-48.9,3.86-71.02-.77-22.13-4.63-40.53-15.56-55.2-32.81-14.67-17.24-21.75-38.99-21.23-65.23.51-21.62,3.86-39.37,10.04-53.27,6.18-13.9,14.28-23.28,24.32-28.18,10.04-4.88,21.48-8.11,34.35-9.65,12.86-1.54,25.86-.89,38.99,1.93,13.12,2.83,26.12,5.54,38.99,8.11,12.86,2.58,24.32,4.77,34.35,6.56,10.04,1.81,18.14,1.54,24.32-.77,6.18-2.32,9.52-7.33,10.04-15.05v-3.86c0-1.54-.27-3.34-.77-5.4-3.09-17.49-17.12-29.34-42.07-35.51-24.97-6.18-51.99-6.18-81.06,0-29.08,6.18-51.86,16.21-68.32,30.11v-143.59h-84.92v-38.6h416.11v38.6ZM1579.6,535.09v-56.36c-12.87,4.63-26.9,5.92-42.07,3.86-15.19-2.05-30.88-4.5-47.09-7.33-16.21-2.82-30.76-5.27-43.62-7.33-12.87-2.05-23.55-.77-32.04,3.86-8.49,4.63-12.74,13.39-12.74,26.25,0,16.48,10.16,29.21,30.49,38.21,20.33,9.01,44.39,13.26,72.18,12.74,27.79-.51,52.75-5.14,74.88-13.89Z"></path>
              <path d="M2073.66,261.03h-410.7v-38.6h410.7v38.6ZM1876.03,297.31c38.08,0,71.02,16.21,98.82,48.64,27.79,32.42,41.69,69.48,41.69,111.17s-10.17,74.63-30.49,103.45c-20.34,28.83-46.45,47.36-78.36,55.58l-33.2-76.43c25.73-5.14,46.96-14.54,63.69-28.18,16.72-13.63,27.53-28.3,32.42-44,4.88-15.69,6.43-31.39,4.63-47.09-1.81-15.69-6.83-28.95-15.05-39.76-10.81-13.9-23.55-21.74-38.21-23.55-14.67-1.8-28.83,1.68-42.46,10.42-13.64,8.76-26.51,19.95-38.6,33.58-12.1,13.64-21.62,29.34-28.56,47.09-6.95,17.76-10.42,34.36-10.42,49.79v118.12l-76.43-15.44v-303.4h76.43v29.34c19.04-19.55,43.74-29.34,74.11-29.34Z"></path>
              <path d="M2405.6,261.03h-293.36v50.18c43.23-13.38,82.6-15.44,118.12-6.18,32.93,7.72,59.95,25.09,81.06,52.11,21.1,27.02,31.65,60.87,31.65,101.52v157.49l-76.43-15.44v-17.76c-20.07,12.87-42.73,21.36-67.94,25.48-25.22,4.12-48.9,3.86-71.02-.77-22.13-4.63-40.53-15.56-55.2-32.81-14.67-17.24-21.75-38.99-21.23-65.23.51-21.62,3.86-39.37,10.04-53.27,6.18-13.9,14.28-23.28,24.32-28.18,10.04-4.88,21.48-8.11,34.35-9.65,12.86-1.54,25.86-.89,38.99,1.93,13.12,2.83,26.12,5.54,38.99,8.11,12.86,2.58,24.32,4.77,34.35,6.56,10.04,1.81,18.14,1.54,24.32-.77,6.18-2.32,9.52-7.33,10.04-15.05v-3.86c0-1.54-.27-3.34-.77-5.4-3.09-17.49-17.12-29.34-42.07-35.51-24.97-6.18-51.99-6.18-81.06,0-29.08,6.18-51.86,16.21-68.32,30.11v-143.59h-84.92v-38.6h416.11v38.6ZM2266.64,535.09v-56.36c-12.87,4.63-26.9,5.92-42.07,3.86-15.19-2.05-30.88-4.5-47.09-7.33-16.21-2.82-30.76-5.27-43.62-7.33-12.87-2.05-23.55-.77-32.04,3.86-8.49,4.63-12.74,13.39-12.74,26.25,0,16.48,10.16,29.21,30.49,38.21,20.33,9.01,44.39,13.26,72.18,12.74,27.79-.51,52.75-5.14,74.88-13.89Z"></path>
              <path d="M2463.5,261.03v74.11c0,1.04-.26,13.64-.77,37.83-.52,24.2-.52,43.88,0,59.06.51,15.19,1.67,33.71,3.47,55.58,1.8,21.88,5.14,39.37,10.04,52.5,4.89,13.12,11.45,21.49,19.69,25.09,14.92,6.7,31,5.02,48.25-5.02,17.24-10.04,33.58-25.34,49.02-45.94l40.14,75.66c-10.3,7.21-20.84,12.62-31.65,16.21-44.78,16.46-89.55,14.15-134.33-6.95-10.81-5.14-20.59-11.83-29.34-20.07-8.76-8.23-15.96-16.33-21.62-24.32-5.67-7.97-10.42-18.26-14.28-30.88-3.86-12.61-6.83-23.54-8.88-32.81-2.06-9.26-3.47-21.62-4.25-37.05-.77-15.44-1.29-27.53-1.54-36.29-.26-8.74-.39-21.35-.39-37.83v-118.89h-57.13v-38.6h57.13V27.11l76.43,15.44v179.88h169.84v38.6h-169.84Z"></path>
              <path d="M3004.67,261.03h-410.7v-38.6h410.7v38.6ZM2807.03,297.31c38.08,0,71.02,16.21,98.82,48.64,27.79,32.42,41.69,69.48,41.69,111.17s-10.17,74.63-30.49,103.45c-20.34,28.83-46.45,47.36-78.36,55.58l-33.2-76.43c25.73-5.14,46.96-14.54,63.69-28.18,16.72-13.63,27.53-28.3,32.42-44,4.88-15.69,6.43-31.39,4.63-47.09-1.81-15.69-6.83-28.95-15.05-39.76-10.81-13.9-23.55-21.74-38.21-23.55-14.67-1.8-28.83,1.68-42.46,10.42-13.64,8.76-26.51,19.95-38.6,33.58-12.1,13.64-21.62,29.34-28.56,47.09-6.95,17.76-10.42,34.36-10.42,49.79v118.12l-76.43-15.44v-303.4h76.43v29.34c19.04-19.55,43.74-29.34,74.11-29.34Z"></path>
              <path d="M3136.66,261.03h-200.72v-38.6h200.72v38.6ZM3089.57,186.15c-14.41-23.67-32.42-44.51-54.04-62.53-21.62-18.01-43.23-31.39-64.85-40.14l64.08-53.27c42.71,51.47,67.42,103.45,74.11,155.94h-19.3ZM2998.48,616.15v-318.84h76.43v303.4l-76.43,15.44Z"></path>
            </svg>
          </Link>
        </div>
        
        <div className="hidden md:flex">
          <MainNav />
        </div>
        
        <div className="flex flex-1 items-center justify-end space-x-4">
          <Button
            variant="ghost"
            size="icon"
            onClick={toggleTheme}
            className="mr-1"
            aria-label="Toggle theme"
          >
            {theme === 'light' ? <Moon className="h-5 w-5" /> : <Sun className="h-5 w-5" />}
          </Button>
          
          <div className="hidden md:flex space-x-2">
            {isLoading ? (
              <div className="h-9 w-9 rounded-full animate-pulse bg-muted"></div>
            ) : user ? (
              <UserButton />
            ) : (
              <>
                <SignInButton />
                <SignUpButton />
              </>
            )}
          </div>
          
          <Button
            variant="ghost"
            className="md:hidden"
            size="icon"
            onClick={toggleMobileMenu}
            aria-label="Toggle menu"
          >
            <Menu className="h-5 w-5" />
          </Button>
        </div>
      </div>
      
      {/* Mobile Menu */}
      {mobileMenuOpen && (
        <div className="md:hidden border-t animate-fade-in">
          <div className="container py-4 space-y-4">
            <Link to="/" className="block py-2 hover:text-primary" onClick={() => setMobileMenuOpen(false)}>
              Home
            </Link>
            <Link to="/books" className="block py-2 hover:text-primary" onClick={() => setMobileMenuOpen(false)}>
              Books
            </Link>
            <Link to="/teachings" className="block py-2 hover:text-primary" onClick={() => setMobileMenuOpen(false)}>
              Teachings
            </Link>
            <Link to="/audiobooks" className="block py-2 hover:text-primary" onClick={() => setMobileMenuOpen(false)}>
              Audiobooks
            </Link>
            <Link to="/stories" className="block py-2 hover:text-primary" onClick={() => setMobileMenuOpen(false)}>
              Stories
            </Link>
            <Link to="/religious-places" className="block py-2 hover:text-primary" onClick={() => setMobileMenuOpen(false)}>
              Religious Places
            </Link>
            <Link to="/about" className="block py-2 hover:text-primary" onClick={() => setMobileMenuOpen(false)}>
              About
            </Link>
            <Link to="/donate" className="block py-2 hover:text-primary" onClick={() => setMobileMenuOpen(false)}>
              Donate
            </Link>
            <div className="pt-2 flex space-x-2">
              {user ? (
                <div className="pt-2 flex items-center justify-between">
                  <span className="text-sm font-medium">Signed in as {user.fullName || user.email}</span>
                  <UserButton />
                </div>
              ) : (
                <div className="pt-2 flex space-x-2">
                  <SignInButton />
                  <SignUpButton />
                </div>
              )}
            </div>
          </div>
        </div>
      )}
    </header>
  );
}